<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Caesar Cipher Puzzle</title>
<style>
  body {
    background: #1e1e1e;
    color: #ddd;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    user-select: none;
  }
  .container {
    background: #2d2d2d;
    padding: 30px 40px;
    border-radius: 8px;
    max-width: 480px;
    width: 90%;
    box-shadow: 0 0 10px #000000aa;
    text-align: center;
  }
  input[type="number"] {
    width: 80px;
    font-size: 1.1em;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #555;
    background: #121212;
    color: #ddd;
    margin-top: 15px;
  }
  button {
    margin-top: 15px;
    padding: 10px 20px;
    background: #444;
    border: none;
    border-radius: 4px;
    color: #ddd;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.25s ease;
  }
  button:hover {
    background: #555;
  }
  .message {
    margin-top: 25px;
    font-size: 1.1em;
    min-height: 2em;
  }
  .decrypted {
    margin-top: 15px;
    font-weight: 600;
    color: #a0a0a0;
    word-wrap: break-word;
    white-space: pre-wrap;
  }
  #encrypted {
    font-size: 1.3em;
    letter-spacing: 2px;
    user-select: text;
    background: #1b1b1b;
    padding: 12px 15px;
    border-radius: 6px;
    margin-top: 10px;
    font-family: monospace, monospace;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Caesar Cipher Puzzle</h1>
    <p>Decrypt the message by entering the correct shift key (a number from 1 to 25):</p>
    <div id="encrypted"></div>
    <input type="number" id="keyInput" min="1" max="25" placeholder="Key" />
    <br />
    <button id="decryptBtn">Decrypt</button>
    <div class="message" id="resultMessage"></div>
    <div class="decrypted" id="decryptedText"></div>
  </div>

  <script>
    // Hidden shift key
    const secretKey = 7;
    // Encrypted message contains a "hacker-style" text inviting to connect on GitHub
    const originalText = `4A6F696E2074686520667265616B7320616E6420656E74657220746865206E6574776F726B2E
4B65793A20436F6E74616374206D652061742068747470733A2F2F6769746875622E636F6D2F566165446576656C6F706572`;

    // Helper: convert hex string to ascii text
    function hexToAscii(hex) {
      return hex.replace(/\s+/g, '').match(/.{1,2}/g)
        .map(byte => String.fromCharCode(parseInt(byte, 16)))
        .join('');
    }

    // Caesar cipher function (positive shift encrypts, negative decrypts)
    function caesarShift(str, shift) {
      return str.split('').map(char => {
        const code = char.charCodeAt(0);
        if (code >= 65 && code <= 90) {
          return String.fromCharCode(((code - 65 + shift + 26) % 26) + 65);
        } else if (code >= 97 && code <= 122) {
          return String.fromCharCode(((code - 97 + shift + 26) % 26) + 97);
        } else {
          return char;
        }
      }).join('');
    }

    // Convert hex to ascii, then encrypt with Caesar cipher
    const asciiText = hexToAscii(originalText);
    const encryptedText = caesarShift(asciiText, secretKey);
    document.getElementById('encrypted').textContent = encryptedText;

    const decryptBtn = document.getElementById('decryptBtn');
    const keyInput = document.getElementById('keyInput');
    const resultMessage = document.getElementById('resultMessage');
    const decryptedText = document.getElementById('decryptedText');

    decryptBtn.onclick = () => {
      const userKey = parseInt(keyInput.value, 10);
      if (isNaN(userKey) || userKey < 1 || userKey > 25) {
        resultMessage.textContent = "Please enter a number from 1 to 25.";
        decryptedText.textContent = "";
        return;
      }
      if (userKey === secretKey) {
        resultMessage.textContent = "Correct! The decrypted message is:";
        decryptedText.textContent = caesarShift(encryptedText, -userKey);
      } else {
        resultMessage.textContent = "Incorrect key. Try again.";
        decryptedText.textContent = "";
      }
    };
  </script>
</body>
</html>
