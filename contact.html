<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Drawflow example — UE-style nodes</title>

  <!-- Подключаем стили Drawflow -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/drawflow/dist/drawflow.min.css" />

  <style>
    body, html {
      margin: 0; height: 100%; overflow: hidden;
      background-color: #111;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      color: #eee;
    }
    #drawflow {
      width: 100vw;
      height: 100vh;
      background: #222;
    }
    .drawflow-node {
      background: #333 !important;
      border: 2px solid #00ffff !important;
      border-radius: 6px !important;
      color: #ccc !important;
      font-weight: bold;
      user-select: none;
    }
    .drawflow-node .title {
      color: #00ffff !important;
      border-bottom: 1px solid #00ffff !important;
    }
  </style>
</head>
<body>

  <div id="drawflow"></div>

  <!-- Подключаем скрипт Drawflow -->
  <script src="https://cdn.jsdelivr.net/npm/drawflow/dist/drawflow.min.js"></script>
  <script>
    // Инициализируем Drawflow
    const container = document.getElementById('drawflow');
    const editor = new Drawflow(container);

    editor.reroute = true; // Включаем возможность добавлять точки соединений (рутеры)
    editor.start();

    // Добавим несколько нод, имитирующих UE стиль (заголовок + входы/выходы)

    // Добавление ноды — параметры: модуль (здесь "Home"), ID ноды, координаты X/Y, HTML содержимое, входы, выходы
    editor.addNode(
      'Add',               // имя ноды
      1,                   // ID
      100, 100,            // позиция X, Y
      `<div class="title">Add</div>
       <div>Input A</div>
       <div>Input B</div>
       <div>Output Result</div>`,   // содержимое ноды (HTML)
      2, // количество входов
      1  // количество выходов
    );

    editor.addNode(
      'Multiply',
      2,
      400, 150,
      `<div class="title">Multiply</div>
       <div>Input X</div>
       <div>Input Y</div>
       <div>Output Product</div>`,
      2,
      1
    );

    editor.addNode(
      'Output',
      3,
      700, 100,
      `<div class="title">Output</div>
       <div>Input Value</div>`,
      1,
      0
    );

    // Соединим ноды: из Add -> Multiply -> Output
    editor.addConnection('Add', 'output_1', 'Multiply', 'input_1');
    editor.addConnection('Multiply', 'output_1', 'Output', 'input_1');

    // Обработка событий для логов в консоль (или сюда можно добавить вывод в лог-окно)
    editor.on('connectionCreated', function(info) {
      console.log('Связь создана:', info);
    });

    editor.on('nodeCreated', function(id) {
      console.log('Нода создана с ID:', id);
    });

    editor.on('connectionRemoved', function(info) {
      console.log('Связь удалена:', info);
    });

  </script>
</body>
</html>
